
/*************************************************************************************************/
/*                                       INCLUDE                                                 */
/*************************************************************************************************/
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <syslog.h>
/*************************************************************************************************/
/*                                       INCUSER                                                 */
/*************************************************************************************************/
#include "std_type.h"
#include "usb.h"
/*************************************************************************************************/
/*                                       DEFINE                                                  */
/*************************************************************************************************/

/*************************************************************************************************/
/*                                       PROTOTYPE                                               */
/*************************************************************************************************/

/*************************************************************************************************/
/*                                       TYPEDEF                                                 */
/*************************************************************************************************/

/*************************************************************************************************/
/*                                       EXPORT                                                  */
/*************************************************************************************************/
extern TS32 USB_iStart_gadget_self_test(void);
extern TS32 USB_iGadget_test_stop(void);

/*************************************************************************************************/
/*                                       VARIABLE                                                */
/*************************************************************************************************/

/*************************************************************************************************/
/*                                       FUNCTIONS                                               */
/*************************************************************************************************/
int main(int argc, char **argv)
{
	//-------------------------------------------------------------------------------
	//Variables definition
	//-------------------------------------------------------------------------------

	TU16 lvu16ArgCount = 0;
	TS32 lvs32RoutineResultStatus = 0;	

	//-------------------------------------------------------------------------------
	//Check arguments
	//-------------------------------------------------------------------------------

	if (argc > 2)
	{
		fprintf(stderr, "Error too much parameters - enter --help\n");
		exit(EXIT_SUCCESS);
	}
	
	while(lvu16ArgCount < argc)
	{
	   	if((0 == strcmp("--help",argv[lvu16ArgCount])) || (0 == strcmp("/?",argv[lvu16ArgCount])))
	   	{
			fprintf(stdout, "Usage : %s \n",argv[0]);	   								
			fprintf(stdout, "Help : --help\n");			
			exit(0);
	   	}   	
		else
		{
		} /* Empty ELSE */

   		lvu16ArgCount++;
	}

	/* Start Self-test */
	USB_iStart_gadget_self_test();

	sleep(15);

	lvs32RoutineResultStatus = USB_iGadget_test_stop();

	fprintf(stdout, "USB result = %d\n", lvs32RoutineResultStatus);

	return 0;
}
